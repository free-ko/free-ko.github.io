---
emoji: 👋
title: '리팩터링 2장'
date: '2023-07-14 20:01:00'
author: Kay
tags: 블로그 github-pages gatsby
categories: Study
---

## 2.1 리팩터링 정의

1. 리팩터링의 사전적 정의

> 소프트웨어의 겉보기 동작은 그대로 유지한 채, 코드를 이해하고 수정하기 쉽도록 내부 구조를 변경하는 기법

2. 리팩터링 이란

   - 동작을 보존하는 작은 단계들을 거쳐 코드를 수정하고, 이러한 단계들을 순차적으로 연결하여 큰 변화를 만들어내는 일
   - “재구성” 의 특수한 한 형태
   - 단계를 작게 나눔으로써 구성을 체계화할 수 있고, 디버깅 시간을 단축할 수 있음
   - 사용자 관점에서는 달라지는 점이 없음
   - 리팩터링 과정에서 발견된 버그는 리팩터링 후에도 그대로 남아 있어야 함
   - 성능 최적화와 비슷
   - 코드를 이해하고 수정하기 쉽게 만드는 것

<br>

## 2.2 두 개의 모자

1. 켄트 백은 소프트웨어 개발의 목적을 `기능 추가` 또는 `리팩터링` 으로 나누고, 이를 두 개의 모자라고 명명한다.
2. `기능 추가` 시에는 기존 코드는 절대 건드리지 않고 새 기능을 추가하기만 한다.
3. 반면 `리팩터링` 시에는 기능 추가는 절대 하지 말아야 한다. (테스트도 새로 만들지 않는다)

<br>

## 2.3 리팩터링하는 이유

1. 리팩터링하면 소프트웨어 설계가 좋아짐

   - 리팩터링하지 않으면 코드 구조가 무너지고, 설계를 유지하기 어려워지고, 더욱 빨리 부패함
   - 중복 코드를 제거하여 코드량을 줄인다고 시스템이 빨라지는 것은 않지만, 수정하는 데 드는 노력과 이해해야할 코드량이 크게 줄어듬

2. 리팩터링하면 소프트웨어를 이해하기 쉬워짐

   - 다른 사람이 내 코드를 이해할 수 있도록 작성해야 함
   - 리팩터링은 코드가 더 잘 읽히게 도와줌
   - 코드의 목적이 더 잘 드러나게, 내 의도를 더 명확하게 전달하도록 개선할 수 있음
   - 추후에 나 자신이 코드를 다시 봤을 때 이해하기도 쉬워 짐

3. 리팩터링하면 프로그래밍 속도를 높일 수 있음
   - 내부 설계가 잘 된 소프트웨어는 새로운 기능을 추가할 지점과 어떻게 고칠지를 쉽게 찾을 수 있음
   - 모듈화가 잘 되어 있으면 전체 코드베이스 중 작은 일부만 이해하면 됨
   - 저자는 이를 ‘지구력 가설’ 이라고 부름
   - 내부 설계에 심혈을 기울이면 소프트웨어의 지구력이 높아져서 빠르게 개발할 수 있는 상태를 더 오래 지속할 수 있음

<br>

## 2.4 리팩터링 해야 하는 시기

1. 3의 법칙

   - 처음에 그냥 진행
   - 비슷한 일을 두 번째로 하게 되면, 일단 계속 진행
   - 비슷한 일을 세 번째 하게 되면 리팩터링 진행

2. 준비를 위한 리팩터링(기능을 쉽게 추가하게 만들기)

   - 리팩터링하기 가장 좋은 시점은 코드베이스에 기능을 새로 추가하기 직전
   - 이 시점에 현재 코드를 살펴보면서, 구조를 살짝 바꾸면 다른 작업을 하기가 훨씬 쉬워질 만한 부분을 찾음
   - 버그를 잡을 때도 마찬가지
   - 상황을 개선해놓으면 버그가 수정된 상태가 오래 지속될 가능성을 높이는 동시에, 같은 곳에서 다른 버그가 발생할 가능성을 줄여 줌

3. 이해를 위한 리팩터링(코드를 이해하기 쉽게 만들기)

   - 코드를 수정하려면 먼저 그 코드가 하는 일을 파악해야 함
   - 그 코드의 의도가 더 명확하게 드러나도록 리팩터링할 여지는 없는지 찾아봐야 함

4. 쓰레기 줍기 리팩터링

   - 간단히 수정할 수 있는 것은 즉시 고치고, 시간이 좀 걸리는 일은 짧은 메모만 남긴 다음, 하던 일을 끝내고 나서 처리 함

5. 코드 리뷰에 리팩터링 활용

   - 코드 리뷰는 개발팀 전체에 지식을 전파하는 데 좋으며, 다른 사람의 아이디어를 얻을 수 있음
   - 리팩터링은 다른 이의 코드를 리뷰하는 데도 도움이 됨
   - 리팩터링은 코드 리뷰의 결과를 더 구체적으로 도출하는 데에도 도움
   - 내가 떠올린 아이디어를 실제로 적용했을 때의 모습을 더 명확하게 볼 수 있음 cf) 짝 프로그래밍

6. 관리자에게는 뭐라고 말해야 할까?

   - “리팩터링한다고 말하지 말라”. 구체적인 방법은 개발자가 판단해야 함
   - 프로 개발자에게 주어진 임무는 새로운 기능을 빠르게 구현하는 것이고, 가장 빠른 방법은 리팩터링 임

7. 리팩터링하지 말아야 할 때
   - 지저분한 코드를 발견해도 굳이 수정할 필요가 없다면 리팩터링하지 않음
   - 내부 동작을 이해해야 할 시점에 리팩터링해야 효과를 제대로 볼 수 있음
   - 리팩터링하는 것보다 처음부터 새로 작성하는 게 쉬울 때도 리팩터링하지 않음
   - 이 결정에는 뛰어난 판단력과 경험이 뒷받침되어야 함

<br>

## 2.5 리팩터링 시 고려할 문제

1. 새 기능 개발 속도 저하

   > 리팩터링의 궁극적인 목적은 개발 속도를 높여서, 더 적은 노력으로 더 많은 가치를 창출하는 것

   - 균형점을 잡아야 함
   - 준비를 위한 리팩터링이라면 주저하지 않고 시작함
   - 반면 내가 직접 건드릴 일이 거의 없거나, 불편한 정도가 그리 심하지 않다고 판단되면 리팩터링하지 않음
   - 코드베이스를 건강하게 만드는 것에 대해 팀원들에게 공감대를 형성해야 함
   - 그러나 리팩터링의 본질은 코드베이스를 예쁘게 꾸미는 것이 아니며, 오로지 경제적인 이유
   - 리팩터링은 개발 기간을 단축하고자 하는 것

<br>

### 참고

- [리팩터링 2판 책](https://www.yes24.com/Product/Goods/89649360)

```toc

```
