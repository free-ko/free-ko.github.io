---
emoji: 👋
title: '리팩터링 3장'
date: '2023-07-27 23:01:00'
author: Kay
tags: 블로그 github-pages gatsby
categories: Study
---

## 3.1 기이한 이름

- 코드는 단순하고 명료하게 작성해야 함
- 함수, 모듈, 변수, 클래스 등은 그 이름만 보고도 각각의 역할을 알 수 있도록 이름 지어야 함
- 이름 짓기는 프로그래밍에서 가장 어렵기로 손꼽히는 일 중 하나임

<br>

## 3.2 중복 코드

똑같은 코드 구조가 여러 곳에서 반복된다면 하나로 통합할 수 있음

- 한 클래스에 딸린 두 메서드가 똑같은 표현식을 사용하는 경우 → 함수 추출하기
- 코드가 비슷하긴 한데 완전히 똑같지는 않다면 → 문장 슬라이드하기
- 같은 부모로부터 파생된 서브 클래스들에 코드가 중복되어 있다면 → 메서드 올리기

<br>

## 3.3 긴 함수

1. 짧은 함수들은 간접 호출의 효과를 낼 수 있다. 코드를 이해하고, 공유하고, 선택하기 쉬워진다는 장점이 있음
2. 짧은 함수로 구성된 코드를 이해하기 쉽게 만들기 위해서는 함수 이름을 잘 지어두어야 함 적극적으로 함수를 쪼개고, 함수 이름은 동작 방식이 아닌 ‘의도’가 드러나게 지어야 함

   - 함수 추출하기
   - 임시 변수를 질의 함수로 바꾸기
   - 매개변수 객체 만들기
   - 객체 통째로 넘기기
   - 함수를 명령으로 바꾸기
   - 조건문 분해하기
   - case문마다 함수 추출하기
   - 조건부 로직을 다형성으로 바꾸기
   - 반복문 쪼개기

<br>

## 3.4 긴 매개변수 목록

- 매개변수를 질의 함수로 바꾸기
- 객체 통째로 넘기기
- 매개변수 객체 만들기
- 플래그 인수 제거하기
- 여러 함수를 클래스로 묶기

<br>

## 3.5 전역 데이터

- 전역 변수를 제거할 수 있는 대표적인 방법은 변수 캡슐화
- 데이터를 함수로 감싸 데이터를 수정하는 부분을 쉽게 찾을 수 있도록 만들고, 접근을 통제할 수 있게 됨
- 나아가 접근자 함수들을 클래스나 모듈에 집어넣고 그 안에서만 사용할 수 있도록 접근 범위를 최소로 줄이는 것도 좋음

<br>

## 3.6 가변 데이터

1. 변수 캡슐화하기
   - 정해놓은 함수를 거쳐야만 값을 수정할 수 있도록 함
2. 변수 쪼개기
   - 하나의 변수에 용도가 다른 값들을 저장하느라 값을 갱신하는 경우
3. 문장 슬라이드하기 & 함수 추출하기
   - 무언가를 갱신하는 코드로부터 부작용이 없는 코드를 분리
4. 질의 함수와 변경 함수 분리하기
   - 부작용이 있는 코드를 호출할 수 없게 만듬
5. 세터 제거하기
   - 변수의 유효범위를 줄일 수 있음

이 밖에도 파생 변수를 질의 함수로 바꾸기, 여러 함수를 클래스 또는 변환 함수로 묶기, 참조를 값으로 바꾸기 등을 적용할 수 있음

<br>

## 3.7 뒤엉킨 변경

- 뒤엉킨 변경은 단일 책임 원칙(SRP)이 제대로 지켜지지 않을 때, 즉 하나의 모듈이 서로 다른 이유들로 인해 여러 가지 방식으로 변경되는 일이 많을 때 발생 함
- 일을 순차적으로 진행하는 ‘단계 쪼개기’와 각 맥락에 해당하는 적당한 모듈들을 만들어서 관련 함수들을 모으는 ‘함수 옮기기’를 적용할 수 있음
- 여러 맥락의 일에 관여하는 함수는 옮기기 전에 ‘함수 추출하기’를 수행하고, 모듈이 클래스라면 ‘클래스 추출하기’를 사용할 수 있음

<br>

## 3.8 산탄총 수술

- 코드를 변경할 때마다 자잘하게 수정해야 하는 클래스가 많은 경우
- 이럴 때는 함께 변경되는 대상들을 함수 옮기기와 필드 옮기기로 모두 한 모듈에 묶어두면 좋음
- 여러 함수를 클래스나 변환 함수로 묶을 수 있고, 단계 쪼개기를 적용할 수 있음
- 어설프게 분리된 로직을 인라인 함수나 인라인 클래스와 같은 인라인 리팩터링으로 하나로 합치는 것도 좋은 방법

<br>

## 3.9 기능 편애

- 기능 편애는 흔히 어떤 함수가 자기가 속한 모듈의 함수나 데이터보다 다른 모듈의 함수나 데이터와 상호작용할 일이 더 많을 때 발생하는 문제
- 이럴 때는 함수 추출하기와 함수 옮기기를 통해 함수를 데이터와 가까운 곳으로 옮김
- 함수가 사용하는 모듈이 다양하다면, 가장 많은 데이터를 포함한 모듈로 옮기거나, 함수 추출하기로 함수를 여러 조각으로 나눈 후 각각을 적합한 모듈로 옮길 수 있음
- 전략 패턴과 방문자 패턴을 적용하여 같은 데이터를 다루는 코드를 한 곳에서 변경할 수 있도록 옮겨준다면, 오버라이드해야 할 소량의 동작 코드를 각각의 클래스로 격리해주므로 수정이 쉬워 짐

<br>

## 3.10 데이터 뭉치

- 데이터 여러 개가 클래스 두어 개의 필드에서, 혹은 여러 메서드의 시그니처에서 함께 발견되는 경우가 있음
- 이럴 때는 가장 먼저 필드 형태의 데이터 뭉치를 찾아서 클래스 추출하기로 하나의 객체로 묶고 다음 매개변수 객체 만들기나 객체 통째로 넘기기를 적용해 매개변수 수를 줄여서 상당한 중복을 없애고 향후 개발을 가속하는 유용한 클래스를 탄생시킬 수 있음

<br>

## 3.11 기본형 집착

- 프로그래머 중에는 자신에게 주어진 문제에 딱 맞는 기초 타입을 직접 정의하기를 몹시 꺼리는 사람이 많음
- 기본형을 객체로 바꾸면 데이터의 타입을 의미 있는 자료형으로 바꿀 수 있음
- 기본형으로 표현된 코드가 조건부 동작을 제어한다면, 타입 코드를 서브클래스로 바꾸거나 조건부 로직을 다형성으로 바꿀 수 있음
- 자주 함께 몰려다니는 기본형 그룹은 클래스 추출과 매개변수 객체화를 이용할 수 있음

<br>

## 3.12 반복되는 switch문

- switch문은 조건부 로직을 다형성으로 바꿔 대체할 수 있음

<br>

### 참고

- [리팩터링 2판 책](https://www.yes24.com/Product/Goods/89649360)

```toc

```
